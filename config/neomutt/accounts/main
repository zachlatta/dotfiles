# vim: filetype=muttrc
unmailboxes *

# in/out mail servers
set realname = "Zach Latta"
set imap_pass = `op get item mutt-passwd | jq '.details.fields|last.value'`
set smtp_url = "smtps://zach@zachlatta.com@smtp.gmail.com:465"
set smtp_pass = `op get item mutt-passwd | jq '.details.fields|last.value'`
set folder = "imaps://zach@zachlatta.com@imap.gmail.com:993"
set spoolfile = "+INBOX"

set from = "zach@zachlatta.com"
set envelope_from
set use_from = "yes"
set record = "" # disable saving outgoing mail because Gmail does it by default
set postponed = "+[Gmail]/Drafts"
set mail_check = 6

# Allow Mutt to open a new IMAP connection automatically.
unset imap_passive

# Keep the IMAP connection alive by polling intermittently (time in seconds).
set imap_keepalive = 300

## Hook -- IMPORTANT!
account-hook $folder "set imap_pass=`op get item mutt-passwd | jq '.details.fields|last.value'`"
