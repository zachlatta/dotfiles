#! /usr/bin/env nix-shell
#! nix-shell -i bash -p slop

# Get the first stylus device connected to the system. xargs trims extra space
STYLUS_DEVICE=$(xsetwacom --list devices | grep STYLUS | head -n 1 | cut -f1 | xargs)

FULL_SCREEN_DIMS=$(xrandr | head -n 1 | sed 's/.*current //' | sed 's/, .*//' | sed 's/ //g' | sed 's/$/+0+0/')

xsetwacom --set "$STYLUS_DEVICE" MapToOutput "$FULL_SCREEN_DIMS"

SELECTION_DIMS=$(
  slop \
    --bordersize 8 \
    --padding -8 \
    --tolerance 50
)

xsetwacom --set "$STYLUS_DEVICE" MapToOutput "$SELECTION_DIMS"
